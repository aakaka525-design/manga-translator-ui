# v2.0.2 更新日志

发布日期：2025-01-02

## 🐛 修复

### 替换翻译模式异常处理修复
- 修复替换翻译模式中嵌套异常处理导致的 `UnboundLocalError` 错误
- 删除局部 `import traceback`，使用全局导入避免变量作用域冲突
- 添加空区域检查，当没有需要修复的区域时跳过处理，避免 `ValueError: attempt to get argmax of an empty sequence` 错误

### Photoshop 导出兼容性修复
- 修复 Photoshop 2020+ 版本打开纯色 PNG 时无法识别背景层的问题
- 优先查找背景层，不存在时使用最底层普通图层作为原图

## ⚡ 优化

### 替换翻译模式图像合成算法升级
- 新增高级图像合成算法 `get_text_to_img_solid_ink`，替代简单的区域粘贴
- 使用色阶调整 + 正片叠底融合技术，文字边缘更自然、背景融合更好
- 采用线性插值缩放，避免边缘过度锐化

### Qt UI 密钥验证优化
- 移除所有翻译器的强制密钥要求，支持本地模型无需密钥直接使用
- 新增本地翻译器配置：offline、sugoi、m2m100、nllb、google 等
- 在线翻译器密钥改为可选，填写时仍会验证格式

### Qt UI 交互优化
- 禁用主页下拉菜单的鼠标滚轮事件，防止滚动页面时意外改动选项
